import{_ as X,A as R,b as $,u as I,Z as ee,c as te,r as m,R as se,B as F,$ as ae,g as r,h as e,G as n,F as y,C as k,i as P,w as j,n as oe,j as ne,I as Y,a0 as N,o as i,D as C,K as E,v as ie,s as ce,x as re,y as le,z as _e}from"./index.d1c105ae.js";import{_ as G}from"./icon_downloads.72d21a0e.js";import{d as L}from"./dayjs.min.89afce53.js";const u=h=>(le("data-v-95c19401"),h=h(),_e(),h),de={key:0,class:"product-page"},ue={class:"logo-box"},pe={class:"font-box w-112 mr-8 p-8"},ve={class:"text-5xl mb-5"},me={class:"text-2xl text-gray-300"},he={class:"img-box w-128 flex justify-center"},we=["src"],fe={class:"utility-box"},ge={class:"p-10 flex flex-col justify-center h-auto w-full"},xe={class:"document-type-title"},ye={class:"w-6/12"},ke=u(()=>e("span",{class:"w-1/12 text-center"},"Version",-1)),Ce=u(()=>e("span",{class:"w-2/12 text-center"},"Creator",-1)),De=u(()=>e("span",{class:"w-2/12 text-center"},"Date",-1)),be={class:"document-list"},Ye={class:"w-1/2"},Le={class:"w-1/12 text-center"},Se={class:"w-2/12 text-center"},Te={class:"w-2/12 text-center"},Ve=["onClick"],Be={class:"w-1/2"},Ae={class:"w-1/12 text-center"},Me={class:"w-2/12 text-center"},Re={class:"w-2/12 text-center"},$e=["onClick"],Ie=u(()=>e("img",{src:G,alt:"",class:"w-5"},null,-1)),Fe=[Ie],Pe={class:"box"},je=ne('<div class="document-type-title" data-v-95c19401><span class="w-6/12" data-v-95c19401>Firmware</span><span class="w-1/12 text-center" data-v-95c19401>Version</span><span class="w-2/12 text-center" data-v-95c19401>Creator</span><span class="w-2/12 text-center" data-v-95c19401>Date</span></div>',1),Ne={class:"box"},Ee={class:"document-list"},Ge={class:"w-6/12"},He={class:"w-1/12 text-center"},ze={class:"w-2/12 text-center"},qe={class:"w-2/12 text-center"},Ke=u(()=>e("span",{class:"w-6/12"},null,-1)),Ue={class:"w-1/12 text-center"},We={class:"w-2/12 text-center"},Ze={class:"w-2/12 text-center"},Je=["onClick"],Oe=u(()=>e("img",{src:G,alt:"",class:"w-5"},null,-1)),Qe=[Oe],Xe={__name:"_id",setup(h){const{loginAdmin:w,products:H}=R($()),{loginAction:z}=$(),{fixLoading:S,fixDocumentTypeList:q,getCreatorList:K,getEditData:U}=I(),{documentTypeList:T,creatorList:D}=R(I()),W=ee(),Z=te(),a=m({}),p=m([]),V=m(""),v=m([]),f=m(!1),J=()=>Z.push("/production"),B=async(t,s)=>await ie(t,ce({tokenReq:w.value.account,token:re("cinoT"),limit:100,page:0,filter:{_id:s}})),A=(t,s,c)=>t==="d"?v.value[s][c]=!v.value[s][c]:f.value=!f.value,M=async(t,s,c,g)=>{const x={time:L().format("YYYY-MM-DD HH:mm:ss"),type:"L",detail:{path:g,target:t,product:a.value.name,target_version:s}},o=Y(w.value.action_log);o.push(x),o.length>100&&o.shift(),await U({action_log:o,_id:w.value._id},"admin",()=>{let _=Y(w.value);_.action_log=o,z(_),window.open(c)},!1)},O=async()=>{a.value=Y(H.value.find(t=>t.name===W.params.id)),V.value=a.value.firmware_id[0],a.value.firmware_id=N((await B("firmware",a.value.firmware_id)).list[0].version.filter(t=>!t.status).map(t=>({version:t.version,download_path:t.download_path,create_date:L(t.create_date).format("YYYY-MM-DD"),creator:D.value.find(s=>s.val===t.creator).opt}))),a.value.documents_id=(await B("document",a.value.documents_id)).list.map(t=>({name:t.name,prefit:t.prefit,version:N(t.version.filter(s=>!s.status).map(s=>({version:s.version,download_path:s.download_path,create_date:L(s.create_date).format("YYYY-MM-DD"),creator:D.value.find(c=>c.val===s.creator).opt}))),_id:t._id,document_type_id:T.value.find(s=>s.val===t.document_type_id).opt}))},Q=()=>{p.value=[...new Set(a.value.documents_id.map(t=>t.document_type_id))].map(t=>({title:t,content:a.value.documents_id.filter(s=>s.document_type_id===t)}));for(let t=0;t<p.value.length;t++){const s=p.value[t];v.value.push(s.content.map(()=>!1))}};return se(async()=>{a.value=[],S(!0),T.value.length||await q(),D.value.length||await K(),await O(),Q(),S(!1)}),(t,s)=>{const c=F("ArrowRight"),g=F("ArrowDown"),x=ae;return p.value.length&&a.value.firmware_id.length?(i(),r("div",de,[e("header",null,[e("div",ue,[e("div",pe,[e("h1",ve,n(a.value.name)+" Series",1),e("p",me,n(a.value.slogan),1)]),e("div",he,[e("img",{class:"w-auto h-full",src:a.value.photo,alt:""},null,8,we)])]),e("div",fe,[e("span",{class:"cursor-pointer text-lg",onClick:s[0]||(s[0]=o=>J())}," Go Back ")])]),e("main",ge,[(i(!0),r(y,null,k(p.value,(o,_)=>(i(),r("div",{key:o,class:"box mb-8"},[e("div",xe,[e("span",ye,n(o.title),1),ke,Ce,De]),(i(!0),r(y,null,k(o.content,(l,b)=>(i(),r("div",{class:"box",key:l.name},[e("div",be,[e("span",Ye,n(l.name),1),e("span",Le,n(l.version[0].version),1),e("span",Se,n(l.version[0].creator),1),e("span",Te,n(l.version[0].create_date),1),e("div",{class:"cursor-pointer",onClick:d=>A("d",_,b)},[P(x,null,{default:j(()=>[v.value[_][b]?(i(),C(g,{key:1})):(i(),C(c,{key:0}))]),_:2},1024)],8,Ve)]),(i(!0),r(y,null,k(l.version,d=>(i(),r("div",{class:E(["version-list",{"height-12":v.value[_][b]}]),key:d.version},[e("span",Be,n(l.name),1),e("span",Ae,n(d.version),1),e("span",Me,n(d.creator),1),e("span",Re,n(d.create_date),1),e("div",{class:"doc-icon",onClick:et=>M(l._id,d.version,d.download_path,"document")},Fe,8,$e)],2))),128))]))),128))]))),128)),e("div",Pe,[je,e("div",Ne,[e("div",Ee,[e("span",Ge,n(`${a.value.name} firmware`),1),e("span",He,n(a.value.firmware_id[0].version),1),e("span",ze,n(a.value.firmware_id[0].creator),1),e("span",qe,n(a.value.firmware_id[0].create_date),1),e("div",{class:"cursor-pointer",onClick:s[1]||(s[1]=o=>A("f"))},[P(x,null,{default:j(()=>[f.value?(i(),C(g,{key:1})):(i(),C(c,{key:0}))]),_:1})])]),(i(!0),r(y,null,k(a.value.firmware_id,o=>(i(),r("div",{class:E(["version-list",{"height-12":f.value}]),key:o.version},[Ke,e("span",Ue,n(o.version),1),e("span",We,n(o.creator),1),e("span",Ze,n(o.create_date),1),e("div",{class:"doc-icon",onClick:_=>M(V.value,o.version,o.download_path,"firmware")},Qe,8,Je)],2))),128))])])])])):oe("v-if",!0)}}},ot=X(Xe,[["__scopeId","data-v-95c19401"],["__file","/Users/erichong/Desktop/WFH/partner-portal/src/views/Product/_id.vue"]]);export{ot as default};
