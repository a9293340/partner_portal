import{_ as F,r as _,u as S,a as C,b as E,c as L,E as I,d as N,e as P,f as U,g as K,h as f,i as a,w as l,j as q,o as B,k as y,l as T,m as A,n as M,p as D,q as G,s as w,t as R,v as j,x as z,y as H,z as O}from"./index.4e1bca5f.js";/* empty css             *//* empty css               *//* empty css              */import{_ as W}from"./A560.caba2d55.js";const $=n=>(H("data-v-08aaad4e"),n=n(),O(),n),J={class:"login-body"},Q={class:"login-container"},X=q('<div class="head" data-v-08aaad4e><img class="logo" src="'+W+'" data-v-08aaad4e><div class="name" data-v-08aaad4e><div class="title" data-v-08aaad4e>CINO</div><div class="tips" data-v-08aaad4e>Partner Portal</div><!-- text-amber-400 --></div></div>',1),Y={class:"recaptcha mb-2"},Z=$(()=>f("p",{class:"text-red-600 m-0 mb-1"},"*case insensitive",-1)),ee=D("Log in"),te={__name:"Login",setup(n){const i=_(null),d=_(null),{fixLoading:u,getProductList:b}=S(),V=c=>d.value=c,v=_(null),t=C({ruleForm:{username:"",password:""},checked:!1,rules:{username:[{required:"true",message:"Account can't be empty",trigger:"blur"}],password:[{required:"true",message:"Password can't be empty",trigger:"blur"}]}}),g=E(),{fixError:m}=g,h=L(),p=async()=>{if(!!d.value){if(d.value.toUpperCase()!==i.value.toUpperCase()){m({title:"Error",msg:"The Verification code is wrong!",isShow:!0});return}v.value.validate(async c=>{if(c){u(!0);let o="";try{o=(await G(w({account:t.ruleForm.username,password:t.ruleForm.password}))).token,R("cinoT",o)}catch(e){e.response&&m({title:"Error",msg:e.response.data.error_code,isShow:!0}),u(!1)}try{const e=await j("admin",w({tokenReq:t.ruleForm.username,token:z("cinoT"),limit:1,page:0,filter:{account:t.ruleForm.username}}));g.loginAction(e.list[0]),await b(),h.push("/"),u(!1)}catch(e){console.log(e);const s=e.response.data.error_code;e.response&&m({title:"Error",msg:s,isShow:!0}),u(!1),s===10005&&h.push("/login")}}})}};return(c,o)=>{const e=I,s=N,k=P,x=U;return B(),K("div",J,[f("div",Q,[X,a(x,{"label-position":"top",rules:t.rules,model:t.ruleForm,ref_key:"loginForm",ref:v},{default:l(()=>[a(s,{label:"Account",prop:"username",style:{"margin-bottom":"30px"},class:"form-label"},{default:l(()=>[a(e,{type:"text",modelValue:t.ruleForm.username,"onUpdate:modelValue":o[0]||(o[0]=r=>t.ruleForm.username=r),modelModifiers:{trim:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(s,{label:"Password",prop:"password",style:{"margin-bottom":"30px"}},{default:l(()=>[a(e,{type:"password",modelValue:t.ruleForm.password,"onUpdate:modelValue":o[1]||(o[1]=r=>t.ruleForm.password=r),modelModifiers:{trim:!0},autocomplete:"off",onKeyup:y(p,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),f("div",Y,[a(e,{type:"text",modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=r=>i.value=r),modelModifiers:{trim:!0},autocomplete:"off",onKeyup:y(p,["enter","native"])},null,8,["modelValue","onKeyup"]),a(T(A),{value:i.value,onGetCode:V},null,8,["value"])]),Z,a(s,null,{default:l(()=>[a(k,{class:"btn",style:{width:"100%"},type:"primary",onClick:p},{default:l(()=>[ee]),_:1}),M(` <el-checkbox
						v-model="state.checked"
						@change="!state.checked"
						>\u4E0B\u6B21\u81EA\u52A8\u767B\u5F55</el-checkbox
					> `)]),_:1})]),_:1},8,["rules","model"])])])}}},ne=F(te,[["__scopeId","data-v-08aaad4e"],["__file","/Users/erichong/Desktop/WFH/partner-portal/src/views/Login.vue"]]);export{ne as default};
