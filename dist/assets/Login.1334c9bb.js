import{_ as F,r as f,u as S,a as C,b as E,c as L,E as I,d as N,e as P,f as U,g as K,h as v,i as a,w as l,j as q,o as B,k as w,l as T,m as A,n as M,p as D,q as G,s as b,t as R,v as j,x as z,y as H,z as O}from"./index.78a19e89.js";/* empty css             *//* empty css               *//* empty css              */import{_ as W}from"./A560.caba2d55.js";const $=n=>(H("data-v-08aaad4e"),n=n(),O(),n),J={class:"login-body"},Q={class:"login-container"},X=q('<div class="head" data-v-08aaad4e><img class="logo" src="'+W+'" data-v-08aaad4e><div class="name" data-v-08aaad4e><div class="title" data-v-08aaad4e>CINO</div><div class="tips" data-v-08aaad4e>Partner Portal</div><!-- text-amber-400 --></div></div>',1),Y={class:"recaptcha mb-2"},Z=$(()=>v("p",{class:"text-red-600 m-0 mb-1"},"*case insensitive",-1)),ee=D("Log in"),te={__name:"Login",setup(n){const i=f(null),m=f(null),{fixLoading:u,getProductList:V}=S(),k=c=>m.value=c,g=f(null),t=C({ruleForm:{username:"",password:""},checked:!1,rules:{username:[{required:"true",message:"Account can't be empty",trigger:"blur"}],password:[{required:"true",message:"Password can't be empty",trigger:"blur"}]}}),h=E(),{fixError:p}=h,y=L(),_=async()=>{if(!!m.value){if(m.value.toUpperCase()!==i.value.toUpperCase()){p({title:"Error",msg:"The Verification code is wrong!",isShow:!0});return}g.value.validate(async c=>{var o;if(c){u(!0);let s="";try{s=(await G(b({account:t.ruleForm.username,password:t.ruleForm.password}))).token,R("cinoT",s)}catch(e){e.response&&p({title:"Error",msg:e.response.data.error_code,isShow:!0}),u(!1)}try{const e=await j("admin",b({tokenReq:t.ruleForm.username,token:z("cinoT"),limit:1,page:0,filter:{account:t.ruleForm.username}}));h.loginAction(e.list[0]),await V(),y.push("/"),u(!1)}catch(e){console.log(e);const d=(o=e.response)==null?void 0:o.data.error_code;e.response&&p({title:"Error",msg:d,isShow:!0}),u(!1),d===10005&&y.push("/login")}}})}};return(c,o)=>{const s=I,e=N,d=P,x=U;return B(),K("div",J,[v("div",Q,[X,a(x,{"label-position":"top",rules:t.rules,model:t.ruleForm,ref_key:"loginForm",ref:g},{default:l(()=>[a(e,{label:"Account",prop:"username",style:{"margin-bottom":"30px"},class:"form-label"},{default:l(()=>[a(s,{type:"text",modelValue:t.ruleForm.username,"onUpdate:modelValue":o[0]||(o[0]=r=>t.ruleForm.username=r),modelModifiers:{trim:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(e,{label:"Password",prop:"password",style:{"margin-bottom":"30px"}},{default:l(()=>[a(s,{type:"password",modelValue:t.ruleForm.password,"onUpdate:modelValue":o[1]||(o[1]=r=>t.ruleForm.password=r),modelModifiers:{trim:!0},autocomplete:"off",onKeyup:w(_,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),v("div",Y,[a(s,{type:"text",modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=r=>i.value=r),modelModifiers:{trim:!0},autocomplete:"off",onKeyup:w(_,["enter","native"])},null,8,["modelValue","onKeyup"]),a(T(A),{value:i.value,onGetCode:k},null,8,["value"])]),Z,a(e,null,{default:l(()=>[a(d,{class:"btn",style:{width:"100%"},type:"primary",onClick:_},{default:l(()=>[ee]),_:1}),M(` <el-checkbox
						v-model="state.checked"
						@change="!state.checked"
						>\u4E0B\u6B21\u81EA\u52A8\u767B\u5F55</el-checkbox
					> `)]),_:1})]),_:1},8,["rules","model"])])])}}},ne=F(te,[["__scopeId","data-v-08aaad4e"],["__file","/Users/erichong/Desktop/WFH/partner-portal/src/views/Login.vue"]]);export{ne as default};
